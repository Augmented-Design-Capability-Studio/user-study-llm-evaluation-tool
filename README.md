# Bracket Design Assistant with LLM Evaluation

This project leverages the OpenAI GPT-4 API to assist in evaluating user studies by generating questions and understanding based on transcripts. The goal is to compare the questions generated by the LLM (Large Language Model) with those asked by a human during the study and to evaluate the LLM's understanding of the design process.

## Features

- Reads transcription files with timestamps.
- Reads Wizard of Oz (WOZ) questions from a CSV file.
- Generates questions and summaries based on the transcription content using OpenAI's GPT-4 API.
- Compares the generated questions with predefined WOZ questions to evaluate similarity and differences.
- Provides concise summaries of the user's progress and understanding.

## Prerequisites

- Node.js installed on your machine.
- An OpenAI API key.

## Installation

1. Clone the repository:

   ```bash
   git clone https://github.com/yourusername/user-study-llm-evaluation-tool.git
   cd user-study-llm-evaluation-tool
   ```

2. Install the required dependencies:

   ```bash
   npm install
   ```

3. Create a `.env` file in the root directory and add your OpenAI API key:

   ```plaintext
   OPENAI_API_KEY=your_openai_api_key
   ```

4. Ensure you have the following files in the root directory:
   - `transcription.srt`: The transcription file with timestamps.
   - `woz_questions.csv`: The WOZ questions file in CSV format.

## File Formats

### Transcription File (`transcription.srt`)

The transcription file should be in the following format:

```plaintext
1
00:00:00,000 --> 00:00:04,000
[silence]

2
00:00:04,000 --> 00:00:08,000
Hey Hannah, this is Frederik. Can you hear me?
...
```

### WOZ Questions File (`woz_questions.csv`)

The WOZ questions file should be in CSV format with the following structure:

```plaintext
video_time,message
00:00:37,"Hey!..... I am a voice agent here to support you during the design task.....I can hear what you are saying, and I can see your screen and follow along with you while you work on the task. Occasionally, I will ask you questions that are supposed to help you think through the design task."
00:01:32,Hey!..... What are you trying to do?
...
```

## Usage

To run the script and process the transcripts:

```bash
node index.js
```

The script will:
1. Read the transcription and WOZ questions files.
2. Use the OpenAI GPT-4 API to generate questions and summaries based on the transcription content.
3. Save the responses and generated questions in `responses.json` and `generated_questions.json` files respectively.

## Output

- `responses.json`: Contains the timestamped summaries of the user's progress.
- `generated_questions.json`: Contains the timestamped generated questions and the corresponding WOZ questions for comparison.

## Example Output

### `responses.json`

```json
[
  {
    "timestamp": "00:00:40,000",
    "understanding": "It looks like we are just getting started with the design task. So far, no specific details have been discussed."
  },
  {
    "timestamp": "00:01:44,840",
    "understanding": "You have acknowledged the goal to create a bracket within the defined space constraints. You're considering how to ensure nothing is generated outside the defined space."
  }
]
```

### `generated_questions.json`

```json
[
  {
    "timestamp": "00:00:40,000",
    "generatedQuestion": "Can you describe your understanding of the design task?",
    "wozQuestion": "Hey!..... I am a voice agent here to support you during the design task.....I can hear what you are saying, and I can see your screen and follow along with you while you work on the task. Occasionally, I will ask you questions that are supposed to help you think through the design task."
  },
  {
    "timestamp": "00:01:44,840",
    "generatedQuestion": "What are the specific space constraints for the bracket design?",
    "wozQuestion": "Hey!..... What are you trying to do?"
  }
]
```

## Assistant Instructions

```plaintext
This assistant is designed to help experienced engineers complete the task of designing a bracket for a ship engine using Fusion360's generative design feature. The assistant will ask guiding questions to help the user think through the design process, ensure thorough explanations, and consider new aspects without providing direct answers.

1. **Understanding the Design Brief:**
   - "Can you describe your understanding of the design task?"
   - "What are the space constraints for the bracket design?"
   - "How many connection points are required, and where are they located?"

3. **Defining Boundary Conditions:**
   - "How much weight must each bracket support?"
   - "What are the critical locations for maximizing strength?"

4. **Exploring Design Options:**
   - "Which materials are you considering for the bracket design?"
   - "What are the advantages and disadvantages of using stainless steel, cast iron, and the additional material you chose?"
   - "What manufacturing methods are you considering, and why?"

5. **Optimizing for DFMA:**
   - "How will you ensure that your design is optimized for machinability and cost?"
   - "What considerations are you taking for assembly operations, serviceability, and maintenance?"

6. **Using Fusion360:**
   - "Have you loaded the predefined elements from the Fusion360 project file?"
   - "How are you applying the generative design feature to explore different design options?"
   - "How are you defining structural loads in Fusion360?"

7. **Selecting and Exporting Final Designs:**
   - "How will you determine which three designs to select from the generated options?"
   - "What criteria will you use to evaluate and compare the designs?"
   - "Are you familiar with the 'Design from Outcome' option in the Explorer overlay for exporting your designs?"

8. **Additional Resources:**
   - "Are there any specific areas where you need more information or support from external resources?"
   - "Would drawing a freebody diagram help?"

9. **Final Checks:**
   - "Have you reviewed all the requirements and ensured your design meets them?"
   - "What are the next steps you will take to finalize and submit your designs?"

**Example Questions to Ask the User:**

**Response Guidelines:**
- Provide no more than a few sentences for each response. Preferably, only provide one sentence. 
- Focus on prompting the user to think critically and explain their thought process.
- Do not provide direct answers to the user's task-related questions.
```

---